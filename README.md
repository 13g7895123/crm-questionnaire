# CRM å•å·ç³»çµ± (CRM Questionnaire System)

ä¸€å€‹åŸºæ–¼ Nuxt 3 é–‹ç™¼çš„ä¼æ¥­ç´šå•å·ç®¡ç†ç³»çµ±ï¼Œå°ˆç‚ºè£½é€ å•†èˆ‡ä¾›æ‡‰å•†ä¹‹é–“çš„ä¾›æ‡‰éˆç¨½æ ¸èˆ‡åˆè¦ç®¡ç†è€Œè¨­è¨ˆã€‚ç³»çµ±æ”¯æ´ SAQï¼ˆè‡ªæˆ‘è©•ä¼°å•å·ï¼‰èˆ‡è¡çªç¤¦ç”¢ç®¡ç†ï¼Œä¸¦æä¾›å®Œæ•´çš„å¤šéšæ®µå¯©æ ¸æµç¨‹ã€‚

[English](#english) | [ç¹é«”ä¸­æ–‡](#ç¹é«”ä¸­æ–‡)

---

## ç¹é«”ä¸­æ–‡

### ğŸ“‹ å°ˆæ¡ˆç°¡ä»‹

CRM å•å·ç³»çµ±æ˜¯ä¸€å€‹å…¨é¢çš„ä¾›æ‡‰éˆç®¡ç†è§£æ±ºæ–¹æ¡ˆï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š

- **æœƒå“¡ä¸­å¿ƒèˆ‡å¸³æˆ¶ç®¡ç†**ï¼šä½¿ç”¨è€…å¯ç®¡ç†å€‹äººè³‡æ–™ã€å¯†ç¢¼ï¼Œä¸¦åˆ‡æ›å¤šèªç³»ä»‹é¢
- **SAQ æ¨¡çµ„**ï¼šè‡ªæˆ‘è©•ä¼°å•å·çš„å»ºç«‹ã€ç®¡ç†èˆ‡å¡«å¯«
- **è¡çªç¤¦ç”¢æ¨¡çµ„**ï¼šè¡çªç¤¦ç”¢èª¿æŸ¥å•å·çš„ç®¡ç†èˆ‡è¿½è¹¤
- **å¤šéšæ®µå¯©æ ¸æµç¨‹**ï¼šæ”¯æ´å¯é…ç½®çš„éƒ¨é–€ç´šå¯©æ ¸å·¥ä½œæµç¨‹
- **ç¯„æœ¬èˆ‡ç‰ˆæœ¬æ§åˆ¶**ï¼šå•å·ç¯„æœ¬ç®¡ç†èˆ‡ç‰ˆæœ¬è¿½è¹¤
- **æ¬Šé™ç®¡ç†**ï¼šå€åˆ†è£½é€ å•†ï¼ˆä¸»è¾¦æ–¹ï¼‰èˆ‡ä¾›æ‡‰å•†è§’è‰²

### ğŸ¯ ä¸»è¦åŠŸèƒ½

#### æœƒå“¡ä¸­å¿ƒ
- å¤šèªç³»æ”¯æ´ï¼ˆç¹é«”ä¸­æ–‡ã€è‹±æ–‡ï¼‰
- å€‹äººè³‡æ–™ç®¡ç†ï¼ˆå§“åã€Emailã€é›»è©±ã€éƒ¨é–€ï¼‰
- å¯†ç¢¼ä¿®æ”¹
- æ‡‰ç”¨ç¨‹å¼å°èˆªï¼ˆå¸³æˆ¶ç®¡ç†ã€SAQã€è¡çªè³‡ç”¢ï¼‰

#### SAQ ç®¡ç†
- å°ˆæ¡ˆç”Ÿå‘½é€±æœŸç®¡ç†ï¼ˆå»ºç«‹ã€ç·¨è¼¯ã€åˆªé™¤ï¼‰
- ç¯„æœ¬ç®¡ç†èˆ‡ç‰ˆæœ¬æ§åˆ¶
- ä¾›æ‡‰å•†æŒ‡æ´¾æ©Ÿåˆ¶
- å¤šéšæ®µå¯©æ ¸æµç¨‹é…ç½®
- å•å·å¡«å¯«èˆ‡é€²åº¦æš«å­˜
- å¯©æ ¸æ­·ç¨‹è¿½è¹¤

#### è¡çªç¤¦ç”¢ç®¡ç†
- ç¨ç«‹çš„å°ˆæ¡ˆèˆ‡ç¯„æœ¬ç®¡ç†
- èˆ‡ SAQ ç›¸åŒçš„åŠŸèƒ½æ¶æ§‹
- è³‡æ–™é‚è¼¯éš”é›¢

#### å¯©æ ¸ç³»çµ±
- å¯é…ç½®çš„å¤šéšæ®µå¯©æ ¸æµç¨‹ï¼ˆ1-5 å€‹éšæ®µï¼‰
- éƒ¨é–€ç´šæ¬Šé™æ§ç®¡
- æ ¸å‡†/é€€å›æ©Ÿåˆ¶
- å®Œæ•´çš„å¯©æ ¸æ­·ç¨‹è¨˜éŒ„

### ğŸ—ï¸ æŠ€è¡“æ¶æ§‹

#### å‰ç«¯æŠ€è¡“æ£§
- **æ¡†æ¶**: Nuxt 3
- **UI åº«**: Nuxt UI
- **ç‹€æ…‹ç®¡ç†**: Pinia
- **åœ‹éš›åŒ–**: @nuxtjs/i18n
- **æ¸¬è©¦**: Vitest + Vue Test Utils
- **èªè¨€**: TypeScript

#### å°ˆæ¡ˆçµæ§‹
```
crm-questionnaire/
â”œâ”€â”€ frontend/              # Nuxt 3 å‰ç«¯æ‡‰ç”¨
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ pages/        # é é¢è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ account/  # å¸³æˆ¶ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ saq/      # SAQ æ¨¡çµ„
â”‚   â”‚   â”‚   â”œâ”€â”€ conflict/ # è¡çªç¤¦ç”¢æ¨¡çµ„
â”‚   â”‚   â”‚   â”œâ”€â”€ review/   # å¯©æ ¸ä»‹é¢
â”‚   â”‚   â”‚   â””â”€â”€ supplier/ # ä¾›æ‡‰å•†ä»‹é¢
â”‚   â”‚   â”œâ”€â”€ components/   # Vue å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ composables/  # Composition API
â”‚   â”‚   â”œâ”€â”€ stores/       # Pinia stores
â”‚   â”‚   â”œâ”€â”€ types/        # TypeScript é¡å‹å®šç¾©
â”‚   â”‚   â”œâ”€â”€ locales/      # èªè¨€æª”æ¡ˆ
â”‚   â”‚   â””â”€â”€ middleware/   # è·¯ç”±ä¸­ä»‹è»Ÿé«”
â”‚   â””â”€â”€ tests/            # æ¸¬è©¦æª”æ¡ˆ
â”œâ”€â”€ specs/                # éœ€æ±‚è¦æ ¼æ–‡ä»¶
â”‚   â””â”€â”€ 003-crm-questionnaire/
â”‚       â”œâ”€â”€ spec.md       # åŠŸèƒ½è¦æ ¼
â”‚       â”œâ”€â”€ data-model.md # è³‡æ–™æ¨¡å‹
â”‚       â”œâ”€â”€ plan.md       # é–‹ç™¼è¨ˆç•«
â”‚       â””â”€â”€ tasks.md      # ä»»å‹™æ¸…å–®
â””â”€â”€ README.md             # å°ˆæ¡ˆèªªæ˜ï¼ˆæœ¬æª”æ¡ˆï¼‰
```

### ğŸš€ å¿«é€Ÿé–‹å§‹

#### ç’°å¢ƒéœ€æ±‚
- Node.js 18.x æˆ–æ›´é«˜ç‰ˆæœ¬
- npmã€pnpmã€yarn æˆ– bun

#### å®‰è£æ­¥é©Ÿ

1. **å…‹éš†å°ˆæ¡ˆ**
```bash
git clone https://github.com/13g7895123/crm-questionnaire.git
cd crm-questionnaire
```

2. **å®‰è£ä¾è³´**
```bash
cd frontend
npm install
```

3. **å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨**
```bash
npm run dev
```

æ‡‰ç”¨ç¨‹å¼å°‡åœ¨ `http://localhost:3000` å•Ÿå‹•

#### å…¶ä»–æŒ‡ä»¤

```bash
# å»ºç½®ç”Ÿç”¢ç‰ˆæœ¬
npm run build

# é è¦½ç”Ÿç”¢ç‰ˆæœ¬
npm run preview

# åŸ·è¡Œæ¸¬è©¦
npm run test

# åŸ·è¡Œæ¸¬è©¦ï¼ˆUI æ¨¡å¼ï¼‰
npm run test:ui
```

### ğŸ“š ä½¿ç”¨è€…æ•…äº‹

#### 1. æœƒå“¡ä¸­å¿ƒèˆ‡å¸³æˆ¶ç®¡ç†
ä½¿ç”¨è€…ç™»å…¥å¾Œé€²å…¥æœƒå“¡ä¸­å¿ƒï¼Œå¯ä»¥çœ‹åˆ°æ‡‰ç”¨ç¨‹å¼åˆ—è¡¨ï¼ˆå¸³æˆ¶ç®¡ç†ã€SAQã€è¡çªè³‡ç”¢ï¼‰ï¼Œä¸¦å¯ä¿®æ”¹å€‹äººè³‡æ–™èˆ‡å¯†ç¢¼ï¼Œåˆ‡æ›èªç³»ã€‚

#### 2. SAQ å°ˆæ¡ˆèˆ‡ç¯„æœ¬ç®¡ç†
è£½é€ å•†ä½¿ç”¨è€…å¯ä»¥ç®¡ç† SAQ å°ˆæ¡ˆèˆ‡ç¯„æœ¬ã€‚å»ºç«‹å°ˆæ¡ˆæ™‚éœ€é¸æ“‡å¹´ä»½ã€ç¯„æœ¬ï¼Œä¸¦æŒ‡æ´¾çµ¦ç‰¹å®šçš„ä¾›æ‡‰å•†ã€‚

#### 3. è¡çªè³‡ç”¢ç®¡ç†
è£½é€ å•†ä½¿ç”¨è€…å¯ä»¥ç®¡ç†è¡çªè³‡ç”¢å°ˆæ¡ˆèˆ‡ç¯„æœ¬ï¼ŒåŠŸèƒ½æ©Ÿåˆ¶èˆ‡ SAQ ç›¸åŒä½†è³‡æ–™ç¨ç«‹ã€‚

#### 4. å•å·å¡«å¯«
è¢«æŒ‡æ´¾çš„ä¾›æ‡‰å•†ä½¿ç”¨è€…å¯é€²å…¥å°ˆæ¡ˆé€²è¡Œå›ç­”ï¼Œæ”¯æ´å¡«å¯«é€²åº¦æš«å­˜ï¼Œå®Œæˆå¾Œæäº¤é€²å…¥å¯©æ ¸æµç¨‹ã€‚

#### 5. å¤šéšæ®µéƒ¨é–€å¯©æ ¸
å°ˆæ¡ˆæäº¤å¾Œé€²å…¥å¤šéšæ®µå¯©æ ¸æµç¨‹ï¼Œå¯©æ ¸è€…å¯æª¢è¦–å°ˆæ¡ˆä¸¦æ±ºå®šæ ¸å‡†æˆ–é€€å›ã€‚

### ğŸ”‘ æ ¸å¿ƒå¯¦é«”

- **Organizationï¼ˆçµ„ç¹”ï¼‰**ï¼šå€åˆ†è£½é€ å•†ï¼ˆHostï¼‰èˆ‡ä¾›æ‡‰å•†ï¼ˆSupplierï¼‰
- **Departmentï¼ˆéƒ¨é–€ï¼‰**ï¼šçµ„ç¹”å…§çš„éƒ¨é–€å–®ä½
- **Userï¼ˆä½¿ç”¨è€…ï¼‰**ï¼šç³»çµ±ä½¿ç”¨è€…ï¼Œæ­¸å±¬æ–¼ç‰¹å®šçµ„ç¹”èˆ‡éƒ¨é–€
- **Projectï¼ˆå°ˆæ¡ˆï¼‰**ï¼šSAQ/è¡çªç¤¦ç”¢çš„åŸ·è¡Œå¯¦é«”
- **Templateï¼ˆç¯„æœ¬ï¼‰**ï¼šå•å·çµæ§‹è—åœ–
- **TemplateVersionï¼ˆç¯„æœ¬ç‰ˆæœ¬ï¼‰**ï¼šç¯„æœ¬çš„ç‰¹å®šå¿«ç…§
- **Questionï¼ˆé¡Œç›®ï¼‰**ï¼šå•å·ä¸­çš„å…·é«”å•é¡Œ
- **Answerï¼ˆç­”æ¡ˆï¼‰**ï¼šå°ˆæ¡ˆä¸­é‡å°é¡Œç›®çš„å›ç­”
- **ReviewLogï¼ˆå¯©æ ¸ç´€éŒ„ï¼‰**ï¼šå°ˆæ¡ˆçš„å¯©æ ¸æ­·ç¨‹
- **ReviewStageï¼ˆå¯©æ ¸éšæ®µï¼‰**ï¼šå¯©æ ¸æµç¨‹çš„æ­¥é©Ÿå®šç¾©

### ğŸ“– æ–‡ä»¶

è©³ç´°çš„åŠŸèƒ½è¦æ ¼èˆ‡è¨­è¨ˆæ–‡ä»¶è«‹åƒè€ƒ `specs/003-crm-questionnaire/` ç›®éŒ„ï¼š

- [åŠŸèƒ½è¦æ ¼æ›¸ (spec.md)](specs/003-crm-questionnaire/spec.md)
- [è³‡æ–™æ¨¡å‹ (data-model.md)](specs/003-crm-questionnaire/data-model.md)
- [é–‹ç™¼è¨ˆç•« (plan.md)](specs/003-crm-questionnaire/plan.md)
- [ä»»å‹™æ¸…å–® (tasks.md)](specs/003-crm-questionnaire/tasks.md)

### ğŸŒ å¤šèªç³»æ”¯æ´

ç³»çµ±æ”¯æ´ä»¥ä¸‹èªè¨€ï¼š
- ç¹é«”ä¸­æ–‡ (zh-TW) - é è¨­èªè¨€
- English (en)

èªè¨€æª”æ¡ˆä½æ–¼ `frontend/app/locales/` ç›®éŒ„

### ğŸ§ª æ¸¬è©¦

å°ˆæ¡ˆä½¿ç”¨ Vitest é€²è¡Œå–®å…ƒæ¸¬è©¦èˆ‡å…ƒä»¶æ¸¬è©¦ï¼š

```bash
# åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
npm run test

# åŸ·è¡Œæ¸¬è©¦ä¸¦é–‹å•Ÿ UI
npm run test:ui
```

æ¸¬è©¦æª”æ¡ˆä½æ–¼ `frontend/tests/` ç›®éŒ„

### ğŸ“ é–‹ç™¼æŒ‡å—

#### é¡Œç›®é¡å‹
ç³»çµ±æ”¯æ´ä»¥ä¸‹é¡Œç›®é¡å‹ï¼š
- åŸºæœ¬é¡Œå‹ï¼ˆå–®é¸ã€å¤šé¸ã€ç°¡ç­”ï¼‰
- æ—¥æœŸ
- æ•¸å­—
- å¸ƒæ—å€¼
- æª”æ¡ˆä¸Šå‚³
- è©•åˆ†é‡è¡¨

#### å°ˆæ¡ˆç‹€æ…‹
- DRAFTï¼ˆè‰ç¨¿ï¼‰
- IN_PROGRESSï¼ˆé€²è¡Œä¸­ï¼‰
- SUBMITTEDï¼ˆå·²æäº¤ï¼‰
- REVIEWINGï¼ˆå¯©æ ¸ä¸­ï¼‰
- APPROVEDï¼ˆå·²æ ¸å‡†ï¼‰
- RETURNEDï¼ˆå·²é€€å›ï¼‰

#### å¯©æ ¸æµç¨‹
- å¯æ–¼å°ˆæ¡ˆå±¤ç´šé…ç½®å¯©æ ¸éšæ®µï¼ˆ1-5 å€‹éšæ®µï¼‰
- æ¯å€‹éšæ®µç”±ç‰¹å®šéƒ¨é–€è² è²¬
- æ”¯æ´æ ¸å‡†é€²å…¥ä¸‹ä¸€éšæ®µæˆ–é€€å›çµ¦ä¾›æ‡‰å•†

### ğŸ¤ è²¢ç»æŒ‡å—

æ­¡è¿æäº¤ Issue æˆ– Pull Requestã€‚åœ¨æäº¤ PR å‰ï¼Œè«‹ç¢ºä¿ï¼š

1. ç¨‹å¼ç¢¼ç¬¦åˆå°ˆæ¡ˆçš„ç¨‹å¼ç¢¼é¢¨æ ¼
2. æ‰€æœ‰æ¸¬è©¦é€šé
3. æ–°åŠŸèƒ½åŒ…å«é©ç•¶çš„æ¸¬è©¦
4. æ›´æ–°ç›¸é—œæ–‡ä»¶

### ğŸ“„ æˆæ¬Š

æ­¤å°ˆæ¡ˆçš„æˆæ¬Šè³‡è¨Šè«‹åƒé–± LICENSE æª”æ¡ˆ

### ğŸ“§ è¯çµ¡è³‡è¨Š

å¦‚æœ‰ä»»ä½•å•é¡Œæˆ–å»ºè­°ï¼Œè«‹é€é GitHub Issues èˆ‡æˆ‘å€‘è¯ç¹«ã€‚

---

## English

### ğŸ“‹ Project Overview

The CRM Questionnaire System is a comprehensive supply chain management solution built with Nuxt 3, designed for audit and compliance management between manufacturers and suppliers. The system supports SAQ (Self-Assessment Questionnaire) and Conflict Minerals management with complete multi-stage review workflows.

### ğŸ¯ Key Features

#### Member Center
- Multi-language support (Traditional Chinese, English)
- Personal profile management (Name, Email, Phone, Department)
- Password modification
- Application navigation (Account Management, SAQ, Conflict Minerals)

#### SAQ Management
- Project lifecycle management (Create, Edit, Delete)
- Template management with version control
- Supplier assignment mechanism
- Configurable multi-stage review workflow
- Questionnaire filling with progress saving
- Review history tracking

#### Conflict Minerals Management
- Independent project and template management
- Same functional architecture as SAQ
- Logically isolated data

#### Review System
- Configurable multi-stage review workflow (1-5 stages)
- Department-level permission control
- Approve/Return mechanism
- Complete review history logging

### ğŸ—ï¸ Technical Architecture

#### Frontend Stack
- **Framework**: Nuxt 3
- **UI Library**: Nuxt UI
- **State Management**: Pinia
- **Internationalization**: @nuxtjs/i18n
- **Testing**: Vitest + Vue Test Utils
- **Language**: TypeScript

### ğŸš€ Quick Start

#### Prerequisites
- Node.js 18.x or higher
- npm, pnpm, yarn, or bun

#### Installation

1. **Clone the repository**
```bash
git clone https://github.com/13g7895123/crm-questionnaire.git
cd crm-questionnaire
```

2. **Install dependencies**
```bash
cd frontend
npm install
```

3. **Start development server**
```bash
npm run dev
```

The application will be available at `http://localhost:3000`

#### Available Commands

```bash
# Build for production
npm run build

# Preview production build
npm run preview

# Run tests
npm run test

# Run tests with UI
npm run test:ui
```

### ğŸ“š User Stories

#### 1. Member Center & Account Management
After login, users can access the member center with application list (Account Management, SAQ, Conflict Minerals), modify personal information and password, and switch languages.

#### 2. SAQ Project & Template Management
Manufacturer users can manage SAQ projects and templates. When creating a project, they need to select year, template, and assign to specific suppliers.

#### 3. Conflict Minerals Management
Manufacturer users can manage Conflict Minerals projects and templates with the same functionality as SAQ but with isolated data.

#### 4. Questionnaire Answering
Assigned supplier users can enter projects to provide answers, with support for progress saving and submission to the review workflow.

#### 5. Multi-stage Departmental Review
After submission, projects enter a multi-stage review workflow where reviewers can examine projects and approve or return them.

### ğŸ”‘ Core Entities

- **Organization**: Distinguishes manufacturers (Host) and suppliers (Supplier)
- **Department**: Departmental units within an organization
- **User**: System users belonging to specific organizations and departments
- **Project**: Execution entities for SAQ/Conflict Minerals
- **Template**: Questionnaire structure blueprint
- **TemplateVersion**: Specific snapshot of a template
- **Question**: Specific questions in the questionnaire
- **Answer**: Responses to questions in projects
- **ReviewLog**: Project review history
- **ReviewStage**: Step definitions in the review workflow

### ğŸ“– Documentation

For detailed specifications and design documents, see the `specs/003-crm-questionnaire/` directory:

- [Feature Specification (spec.md)](specs/003-crm-questionnaire/spec.md)
- [Data Model (data-model.md)](specs/003-crm-questionnaire/data-model.md)
- [Development Plan (plan.md)](specs/003-crm-questionnaire/plan.md)
- [Task List (tasks.md)](specs/003-crm-questionnaire/tasks.md)

### ğŸŒ Internationalization

Supported languages:
- Traditional Chinese (zh-TW) - Default
- English (en)

Language files are located in `frontend/app/locales/`

### ğŸ§ª Testing

The project uses Vitest for unit and component testing:

```bash
# Run all tests
npm run test

# Run tests with UI
npm run test:ui
```

Test files are located in `frontend/tests/`

### ğŸ“ Development Guide

#### Question Types
The system supports the following question types:
- Basic types (Single choice, Multiple choice, Short answer)
- Date
- Number
- Boolean
- File upload
- Rating scale

#### Project Status
- DRAFT
- IN_PROGRESS
- SUBMITTED
- REVIEWING
- APPROVED
- RETURNED

#### Review Workflow
- Configurable at project level (1-5 stages)
- Each stage is responsible by a specific department
- Supports approval to next stage or return to supplier

### ğŸ¤ Contributing

Issues and Pull Requests are welcome. Before submitting a PR, please ensure:

1. Code follows the project's coding style
2. All tests pass
3. New features include appropriate tests
4. Related documentation is updated

### ğŸ“„ License

Please refer to the LICENSE file for licensing information

### ğŸ“§ Contact

For any questions or suggestions, please contact us through GitHub Issues.
